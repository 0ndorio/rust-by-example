<!DOCTYPE HTML>
<html lang="en-US" manifest="../../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Borrowing | Rust by Example</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="japaric">
        <meta name="description" content="[Rust](http://www.rust-lang.org/) is a programming language with a focus on
type safety, memory safety, concurrency and performance.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../../examples/lifetime/README.html" />
        
        
        <link rel="prev" href="../../examples/move/README.html" />
        

        <meta property="og:title" content="Borrowing | Rust by Example">
        <meta property="og:site_name" content="Rust by Example">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/japaric">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../../gitbook/style.css">
        


        
    <div class="book" data-github="japaric/rust-by-example" data-level="18" data-basepath="../.." data-revision="1399401814794">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/japaric/rust-by-example" target="_blank" class="btn pull-left"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/japaric/rust-by-example/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/japaric/rust-by-example/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../../" >Rust by Example</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/japaric" target="blank">About the author</a>
        </li>
        

        
        <li>
            <a href="https://github.com/japaric/rust-by-example/issues" target="blank">Questions and Issues</a>
        </li>
        

        
        <li>
            <a href="https://github.com/japaric/rust-by-example/edit/master/src/borrow/input.md" target="blank">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="../../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="examples/hello/README.html">
                
                <a href="../../examples/hello/README.html">
                    <i class="fa fa-check"></i> <b>1.</b> Hello World
                </a>
                
                
            </li>
        
            <li  data-level="2" data-path="examples/print/README.html">
                
                <a href="../../examples/print/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> Formatted print
                </a>
                
                
            </li>
        
            <li  data-level="3" data-path="examples/literals/README.html">
                
                <a href="../../examples/literals/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Literals
                </a>
                
                
            </li>
        
            <li  data-level="4" data-path="examples/variables/README.html">
                
                <a href="../../examples/variables/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Variables
                </a>
                
                
            </li>
        
            <li  data-level="5" data-path="examples/type/README.html">
                
                <a href="../../examples/type/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> Types, casting and inference
                </a>
                
                
            </li>
        
            <li  data-level="6" data-path="examples/expression/README.html">
                
                <a href="../../examples/expression/README.html">
                    <i class="fa fa-check"></i> <b>6.</b> Blocks and expressions
                </a>
                
                
            </li>
        
            <li  data-level="7" data-path="examples/if-else/README.html">
                
                <a href="../../examples/if-else/README.html">
                    <i class="fa fa-check"></i> <b>7.</b> if/else
                </a>
                
                
            </li>
        
            <li  data-level="8" data-path="examples/loops/README.html">
                
                <a href="../../examples/loops/README.html">
                    <i class="fa fa-check"></i> <b>8.</b> loop and while
                </a>
                
                
            </li>
        
            <li  data-level="9" data-path="examples/for/README.html">
                
                <a href="../../examples/for/README.html">
                    <i class="fa fa-check"></i> <b>9.</b> for and range
                </a>
                
                
            </li>
        
            <li  data-level="10" data-path="examples/functions/README.html">
                
                <a href="../../examples/functions/README.html">
                    <i class="fa fa-check"></i> <b>10.</b> Functions
                </a>
                
                
            </li>
        
            <li  data-level="11" data-path="examples/tuples/README.html">
                
                <a href="../../examples/tuples/README.html">
                    <i class="fa fa-check"></i> <b>11.</b> Tuples
                </a>
                
                
            </li>
        
            <li  data-level="12" data-path="examples/match/README.html">
                
                <a href="../../examples/match/README.html">
                    <i class="fa fa-check"></i> <b>12.</b> Pattern matching
                </a>
                
                
            </li>
        
            <li  data-level="13" data-path="examples/structs/README.html">
                
                <a href="../../examples/structs/README.html">
                    <i class="fa fa-check"></i> <b>13.</b> Structs
                </a>
                
                
            </li>
        
            <li  data-level="14" data-path="examples/generics/README.html">
                
                <a href="../../examples/generics/README.html">
                    <i class="fa fa-check"></i> <b>14.</b> Generics
                </a>
                
                
            </li>
        
            <li  data-level="15" data-path="examples/box/README.html">
                
                <a href="../../examples/box/README.html">
                    <i class="fa fa-check"></i> <b>15.</b> Box, stack and heap
                </a>
                
                
            </li>
        
            <li  data-level="16" data-path="examples/raii/README.html">
                
                <a href="../../examples/raii/README.html">
                    <i class="fa fa-check"></i> <b>16.</b> RAII
                </a>
                
                
            </li>
        
            <li  data-level="17" data-path="examples/move/README.html">
                
                <a href="../../examples/move/README.html">
                    <i class="fa fa-check"></i> <b>17.</b> Ownership and moves
                </a>
                
                
            </li>
        
            <li  data-level="18" data-path="examples/borrow/README.html">
                
                <a href="../../examples/borrow/README.html">
                    <i class="fa fa-check"></i> <b>18.</b> Borrowing
                </a>
                
                
            </li>
        
            <li  data-level="19" data-path="examples/lifetime/README.html">
                
                <a href="../../examples/lifetime/README.html">
                    <i class="fa fa-check"></i> <b>19.</b> Lifetimes
                </a>
                
                
            </li>
        
            <li  data-level="20" data-path="examples/methods/README.html">
                
                <a href="../../examples/methods/README.html">
                    <i class="fa fa-check"></i> <b>20.</b> Methods
                </a>
                
                
            </li>
        
            <li  data-level="21" data-path="examples/constants/README.html">
                
                <a href="../../examples/constants/README.html">
                    <i class="fa fa-check"></i> <b>21.</b> Global constants
                </a>
                
                
            </li>
        
            <li  data-level="22" data-path="examples/option/README.html">
                
                <a href="../../examples/option/README.html">
                    <i class="fa fa-check"></i> <b>22.</b> fail! and Option
                </a>
                
                
            </li>
        
            <li  data-level="23" data-path="examples/enum/README.html">
                
                <a href="../../examples/enum/README.html">
                    <i class="fa fa-check"></i> <b>23.</b> Enums
                </a>
                
                
            </li>
        
            <li  data-level="24" data-path="examples/array/README.html">
                
                <a href="../../examples/array/README.html">
                    <i class="fa fa-check"></i> <b>24.</b> Arrays and Slices
                </a>
                
                
            </li>
        
            <li  data-level="25" data-path="examples/trait/README.html">
                
                <a href="../../examples/trait/README.html">
                    <i class="fa fa-check"></i> <b>25.</b> Traits
                </a>
                
                
            </li>
        
            <li  data-level="26" data-path="examples/clone/README.html">
                
                <a href="../../examples/clone/README.html">
                    <i class="fa fa-check"></i> <b>26.</b> Clone
                </a>
                
                
            </li>
        
            <li  data-level="27" data-path="examples/operator/README.html">
                
                <a href="../../examples/operator/README.html">
                    <i class="fa fa-check"></i> <b>27.</b> Operator Overloading
                </a>
                
                
            </li>
        
            <li  data-level="28" data-path="examples/bounds/README.html">
                
                <a href="../../examples/bounds/README.html">
                    <i class="fa fa-check"></i> <b>28.</b> Bounds
                </a>
                
                
            </li>
        
            <li  data-level="29" data-path="examples/iter/README.html">
                
                <a href="../../examples/iter/README.html">
                    <i class="fa fa-check"></i> <b>29.</b> Iterators
                </a>
                
                
            </li>
        
            <li  data-level="30" data-path="examples/closures/README.html">
                
                <a href="../../examples/closures/README.html">
                    <i class="fa fa-check"></i> <b>30.</b> Closures
                </a>
                
                
            </li>
        
            <li  data-level="31" data-path="examples/hof/README.html">
                
                <a href="../../examples/hof/README.html">
                    <i class="fa fa-check"></i> <b>31.</b> Higher Order Functions
                </a>
                
                
            </li>
        
            <li  data-level="32" data-path="examples/vec/README.html">
                
                <a href="../../examples/vec/README.html">
                    <i class="fa fa-check"></i> <b>32.</b> Vectors
                </a>
                
                
            </li>
        
            <li  data-level="33" data-path="examples/str/README.html">
                
                <a href="../../examples/str/README.html">
                    <i class="fa fa-check"></i> <b>33.</b> Strings
                </a>
                
                
            </li>
        
            <li  data-level="34" data-path="examples/tasks/README.html">
                
                <a href="../../examples/tasks/README.html">
                    <i class="fa fa-check"></i> <b>34.</b> Tasks
                </a>
                
                
            </li>
        
            <li  data-level="35" data-path="examples/channels/README.html">
                
                <a href="../../examples/channels/README.html">
                    <i class="fa fa-check"></i> <b>35.</b> Channels
                </a>
                
                
            </li>
        
            <li  data-level="36" data-path="examples/timers/README.html">
                
                <a href="../../examples/timers/README.html">
                    <i class="fa fa-check"></i> <b>36.</b> Timers
                </a>
                
                
            </li>
        
            <li  data-level="37" data-path="examples/sockets/README.html">
                
                <a href="../../examples/sockets/README.html">
                    <i class="fa fa-check"></i> <b>37.</b> Unix sockets
                </a>
                
                
            </li>
        
            <li  data-level="38" data-path="examples/staging/README.html">
                
                <a href="../../examples/staging/README.html">
                    <i class="fa fa-check"></i> <b>38.</b> Staging Area
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="38.1" data-path="examples/bench/README.html">
                            
                            <a href="../../examples/bench/README.html">
                                <i class="fa fa-check"></i> <b>38.1.</b> Benchmarking
                            </a>
                            
                        </li>
                    
                        <li  data-level="38.2" data-path="examples/test/README.html">
                            
                            <a href="../../examples/test/README.html">
                                <i class="fa fa-check"></i> <b>38.2.</b> Testing
                            </a>
                            
                        </li>
                    
                        <li  data-level="38.3" data-path="examples/unsafe/README.html">
                            
                            <a href="../../examples/unsafe/README.html">
                                <i class="fa fa-check"></i> <b>38.3.</b> Unsafe operations
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="39" data-path="examples/todo/README.html">
                
                <a href="../../examples/todo/README.html">
                    <i class="fa fa-check"></i> <b>39.</b> TODO
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="39.1" >
                            
                            <span><b>39.1.</b> Program arguments</span>
                            
                        </li>
                    
                        <li  data-level="39.2" >
                            
                            <span><b>39.2.</b> assert! and debug_assert!</span>
                            
                        </li>
                    
                        <li  data-level="39.3" >
                            
                            <span><b>39.3.</b> Attributes</span>
                            
                        </li>
                    
                        <li  data-level="39.4" >
                            
                            <span><b>39.4.</b> Comments</span>
                            
                        </li>
                    
                        <li  data-level="39.5" >
                            
                            <span><b>39.5.</b> Crates</span>
                            
                        </li>
                    
                        <li  data-level="39.6" >
                            
                            <span><b>39.6.</b> Drop</span>
                            
                        </li>
                    
                        <li  data-level="39.7" >
                            
                            <span><b>39.7.</b> Foreign Function Interface</span>
                            
                        </li>
                    
                        <li  data-level="39.8" >
                            
                            <span><b>39.8.</b> File I/O</span>
                            
                        </li>
                    
                        <li  data-level="39.9" >
                            
                            <span><b>39.9.</b> Filesystem Operations</span>
                            
                        </li>
                    
                        <li  data-level="39.10" >
                            
                            <span><b>39.10.</b> Green threads</span>
                            
                        </li>
                    
                        <li  data-level="39.11" >
                            
                            <span><b>39.11.</b> Hasher and Hashmap</span>
                            
                        </li>
                    
                        <li  data-level="39.12" >
                            
                            <span><b>39.12.</b> JSON parsing</span>
                            
                        </li>
                    
                        <li  data-level="39.13" >
                            
                            <span><b>39.13.</b> Logging</span>
                            
                        </li>
                    
                        <li  data-level="39.14" >
                            
                            <span><b>39.14.</b> macro_rules!</span>
                            
                        </li>
                    
                        <li  data-level="39.15" >
                            
                            <span><b>39.15.</b> Modules</span>
                            
                        </li>
                    
                        <li  data-level="39.16" >
                            
                            <span><b>39.16.</b> Child processes</span>
                            
                        </li>
                    
                        <li  data-level="39.17" >
                            
                            <span><b>39.17.</b> Random</span>
                            
                        </li>
                    
                        <li  data-level="39.18" >
                            
                            <span><b>39.18.</b> Reference counting</span>
                            
                        </li>
                    
                        <li  data-level="39.19" >
                            
                            <span><b>39.19.</b> Regex</span>
                            
                        </li>
                    
                        <li  data-level="39.20" >
                            
                            <span><b>39.20.</b> Result</span>
                            
                        </li>
                    
                        <li  data-level="39.21" >
                            
                            <span><b>39.21.</b> rustdoc</span>
                            
                        </li>
                    
                        <li  data-level="39.22" >
                            
                            <span><b>39.22.</b> select!</span>
                            
                        </li>
                    
                        <li  data-level="39.23" >
                            
                            <span><b>39.23.</b> Standard I/O</span>
                            
                        </li>
                    
                        <li  data-level="39.24" >
                            
                            <span><b>39.24.</b> try!</span>
                            
                        </li>
                    
                </ul>
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 23.80952380952381%;min-width: 21.428571428571427%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../../examples/hello/README.html" title="Hello World" class="chapter done new-chapter" data-progress="1" style="left: 2.380952380952381%;"></a>
    
        <a href="../../examples/functions/README.html" title="Functions" class="chapter done " data-progress="10" style="left: 4.761904761904762%;"></a>
    
        <a href="../../examples/tuples/README.html" title="Tuples" class="chapter done " data-progress="11" style="left: 7.142857142857143%;"></a>
    
        <a href="../../examples/match/README.html" title="Pattern matching" class="chapter done " data-progress="12" style="left: 9.523809523809524%;"></a>
    
        <a href="../../examples/structs/README.html" title="Structs" class="chapter done " data-progress="13" style="left: 11.904761904761905%;"></a>
    
        <a href="../../examples/generics/README.html" title="Generics" class="chapter done " data-progress="14" style="left: 14.285714285714286%;"></a>
    
        <a href="../../examples/box/README.html" title="Box, stack and heap" class="chapter done " data-progress="15" style="left: 16.666666666666668%;"></a>
    
        <a href="../../examples/raii/README.html" title="RAII" class="chapter done " data-progress="16" style="left: 19.047619047619047%;"></a>
    
        <a href="../../examples/move/README.html" title="Ownership and moves" class="chapter done " data-progress="17" style="left: 21.428571428571427%;"></a>
    
        <a href="../../examples/borrow/README.html" title="Borrowing" class="chapter done " data-progress="18" style="left: 23.80952380952381%;"></a>
    
        <a href="../../examples/lifetime/README.html" title="Lifetimes" class="chapter  " data-progress="19" style="left: 26.19047619047619%;"></a>
    
        <a href="../../examples/print/README.html" title="Formatted print" class="chapter  new-chapter" data-progress="2" style="left: 28.571428571428573%;"></a>
    
        <a href="../../examples/methods/README.html" title="Methods" class="chapter  " data-progress="20" style="left: 30.952380952380953%;"></a>
    
        <a href="../../examples/constants/README.html" title="Global constants" class="chapter  " data-progress="21" style="left: 33.333333333333336%;"></a>
    
        <a href="../../examples/option/README.html" title="fail! and Option" class="chapter  " data-progress="22" style="left: 35.714285714285715%;"></a>
    
        <a href="../../examples/enum/README.html" title="Enums" class="chapter  " data-progress="23" style="left: 38.095238095238095%;"></a>
    
        <a href="../../examples/array/README.html" title="Arrays and Slices" class="chapter  " data-progress="24" style="left: 40.476190476190474%;"></a>
    
        <a href="../../examples/trait/README.html" title="Traits" class="chapter  " data-progress="25" style="left: 42.857142857142854%;"></a>
    
        <a href="../../examples/clone/README.html" title="Clone" class="chapter  " data-progress="26" style="left: 45.23809523809524%;"></a>
    
        <a href="../../examples/operator/README.html" title="Operator Overloading" class="chapter  " data-progress="27" style="left: 47.61904761904762%;"></a>
    
        <a href="../../examples/bounds/README.html" title="Bounds" class="chapter  " data-progress="28" style="left: 50%;"></a>
    
        <a href="../../examples/iter/README.html" title="Iterators" class="chapter  " data-progress="29" style="left: 52.38095238095238%;"></a>
    
        <a href="../../examples/literals/README.html" title="Literals" class="chapter  new-chapter" data-progress="3" style="left: 54.76190476190476%;"></a>
    
        <a href="../../examples/closures/README.html" title="Closures" class="chapter  " data-progress="30" style="left: 57.142857142857146%;"></a>
    
        <a href="../../examples/hof/README.html" title="Higher Order Functions" class="chapter  " data-progress="31" style="left: 59.523809523809526%;"></a>
    
        <a href="../../examples/vec/README.html" title="Vectors" class="chapter  " data-progress="32" style="left: 61.904761904761905%;"></a>
    
        <a href="../../examples/str/README.html" title="Strings" class="chapter  " data-progress="33" style="left: 64.28571428571429%;"></a>
    
        <a href="../../examples/tasks/README.html" title="Tasks" class="chapter  " data-progress="34" style="left: 66.66666666666667%;"></a>
    
        <a href="../../examples/channels/README.html" title="Channels" class="chapter  " data-progress="35" style="left: 69.04761904761905%;"></a>
    
        <a href="../../examples/timers/README.html" title="Timers" class="chapter  " data-progress="36" style="left: 71.42857142857143%;"></a>
    
        <a href="../../examples/sockets/README.html" title="Unix sockets" class="chapter  " data-progress="37" style="left: 73.80952380952381%;"></a>
    
        <a href="../../examples/staging/README.html" title="Staging Area" class="chapter  " data-progress="38" style="left: 76.19047619047619%;"></a>
    
        <a href="../../examples/bench/README.html" title="Benchmarking" class="chapter  " data-progress="38.1" style="left: 78.57142857142857%;"></a>
    
        <a href="../../examples/test/README.html" title="Testing" class="chapter  " data-progress="38.2" style="left: 80.95238095238095%;"></a>
    
        <a href="../../examples/unsafe/README.html" title="Unsafe operations" class="chapter  " data-progress="38.3" style="left: 83.33333333333333%;"></a>
    
        <a href="../../examples/todo/README.html" title="TODO" class="chapter  " data-progress="39" style="left: 85.71428571428571%;"></a>
    
        <a href="../../examples/variables/README.html" title="Variables" class="chapter  new-chapter" data-progress="4" style="left: 88.0952380952381%;"></a>
    
        <a href="../../examples/type/README.html" title="Types, casting and inference" class="chapter  new-chapter" data-progress="5" style="left: 90.47619047619048%;"></a>
    
        <a href="../../examples/expression/README.html" title="Blocks and expressions" class="chapter  new-chapter" data-progress="6" style="left: 92.85714285714286%;"></a>
    
        <a href="../../examples/if-else/README.html" title="if/else" class="chapter  new-chapter" data-progress="7" style="left: 95.23809523809524%;"></a>
    
        <a href="../../examples/loops/README.html" title="loop and while" class="chapter  new-chapter" data-progress="8" style="left: 97.61904761904762%;"></a>
    
        <a href="../../examples/for/README.html" title="for and range" class="chapter  new-chapter" data-progress="9" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_4">
                    
                        <h1 id="borrowing">Borrowing</h1>
<p>Most of times, we&#39;ll like to access some data, without taking ownership over
it. To accomplish this, Rust provides a <em>borrowing</em> mechanism. Instead of
passing objects by-value (<code>T</code>), objects can be passed by reference (<code>&amp;T</code>). The
compiler statically guarantees that references <em>always</em> point to valid objects,
via its borrow checker.</p>
<pre><code class="lang-rust"><span class="hljs-comment">// borrow.rs</span>
<span class="hljs-keyword">use</span> std::owned::Box;

<span class="hljs-comment">// this function takes ownership of the box</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">eat_box</span>(</span>boxed_int: Box&lt;<span class="hljs-keyword">int</span>&gt;) {
    <span class="hljs-comment">// the box gets destroyed in this scope</span>
}

<span class="hljs-comment">// this function borrows the box</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">peep_inside_box</span>(</span>borrowed_box: &amp;Box&lt;<span class="hljs-keyword">int</span>&gt;) {
    println!(<span class="hljs-string">"This box contains {}"</span>, borrowed_box);
}

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span>(</span>) {
    <span class="hljs-comment">// boxed integer</span>
    <span class="hljs-keyword">let</span> boxed_int = box <span class="hljs-number">5</span>;

    <span class="hljs-comment">// borrow the box, ownership is not taken</span>
    peep_inside_box(&amp;boxed_int);

    <span class="hljs-comment">// give up ownership of the box</span>
    eat_box(boxed_int);
}
</code></pre>
<pre><code>$ rustc borrow.rs &amp;&amp; ./borrow
This box contains 5
</code></pre><p><code>&amp;T</code> borrows the data via an immutable reference, and the borrower can read the
data but not modify it. Mutable data can be immutably borrowed, but can also be
mutably borrowed via a mutable reference <code>&amp;mut T</code>, giving read/write access to
the borrower.</p>
<pre><code class="lang-rust"><span class="hljs-comment">// mut.rs</span>
<span class="hljs-keyword">struct</span> Book {
    <span class="hljs-comment">// ~str is a heap allocated string</span>
    author: ~<span class="hljs-keyword">str</span>,
    title: ~<span class="hljs-keyword">str</span>,
    year: <span class="hljs-keyword">uint</span>,
}

<span class="hljs-comment">// this function takes a reference to a book</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">borrow_book</span>(</span>book: &amp;Book) {
    println!(<span class="hljs-string">"I borrowed {} {} edition"</span>, book.title, book.year);
}

<span class="hljs-comment">// this function, takes a reference to a mutable book</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">new_edition</span>(</span>book: &amp;<span class="hljs-keyword">mut</span> Book) {
    <span class="hljs-comment">// the fields of the book can be modified</span>
    book.year = <span class="hljs-number">2014</span>;
}

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span>(</span>) {
    <span class="hljs-comment">// an immutable Book</span>
    <span class="hljs-keyword">let</span> geb = Book {
        <span class="hljs-comment">// to_owned() will place the string in the heap</span>
        author: <span class="hljs-string">"Douglas Hofstadter"</span>.to_owned(),
        title: <span class="hljs-string">"Gödel, Escher, Bach"</span>.to_owned(),
        year: <span class="hljs-number">1979</span>,
    };

    <span class="hljs-comment">// borrow geb, geb can still be used afterwards</span>
    borrow_book(&amp;geb);

    <span class="hljs-comment">// geb can be borrowed again, and again, and again ...</span>
    borrow_book(&amp;geb);

    <span class="hljs-comment">// Error: can't borrow immutable object as mutable</span>
    <span class="hljs-comment">//new_edition(&amp;mut geb);</span>

    <span class="hljs-comment">// pass ownership of geb to mutable_geb, changing mutability</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> mutable_geb = geb;

    <span class="hljs-comment">// Ok: borrow a mutable object as mutable</span>
    new_edition(&amp;<span class="hljs-keyword">mut</span> mutable_geb);

    <span class="hljs-comment">// Ok: mutable objects can be immutably borrowed</span>
    borrow_book(&amp;mutable_geb);
}
</code></pre>
<pre><code>$ rustc mut.rs &amp;&amp; ./mut
I borrowed Gödel, Escher, Bach 1979 edition
I borrowed Gödel, Escher, Bach 1979 edition
I borrowed Gödel, Escher, Bach 2014 edition
</code></pre><p>When data is borrowed, it also <em>freezes</em>. &quot;Frozen&quot; data can&#39;t be modified via
the original object, until all the references to it go out of scope.</p>
<pre><code class="lang-rust"><span class="hljs-comment">// freeze.rs</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span>(</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> integer = <span class="hljs-number">5</span>;

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">true</span> {
        <span class="hljs-comment">// borrow integer</span>
        <span class="hljs-keyword">let</span> ref_to_integer = &amp;integer;

        <span class="hljs-comment">// Error: integer is frozen</span>
        integer = <span class="hljs-number">4</span>;

        <span class="hljs-comment">// ref_to_integer goes out of scope</span>
    }

    <span class="hljs-comment">// Ok: integer is not borrowed in this scope</span>
    integer = <span class="hljs-number">4</span>;
}
</code></pre>
<pre><code>$ rustc freeze.rs &amp;&amp; ./freeze
src/borrow/freeze.rs:9:9: 9:16 error: cannot assign to `integer` because it is borrowed
src/borrow/freeze.rs:9         integer = 4;
                               ^~~~~~~
src/borrow/freeze.rs:6:31: 6:38 note: borrow of `integer` occurs here
src/borrow/freeze.rs:6         let ref_to_integer = &amp;integer;
                                                     ^~~~~~~
error: aborting due to previous error
</code></pre><p>Data can be immutably borrowed any number of times, but once immutably
borrowed, the original data can&#39;t be mutably borrowed. On the other side, data
can be mutably borrowed <em>once</em>, and until the mutable reference goes out of
scope, the original data can&#39;t be borrowed again.</p>
<pre><code class="lang-rust"><span class="hljs-comment">// re-borrow.rs</span>
<span class="hljs-keyword">struct</span> Point {
    x: <span class="hljs-keyword">int</span>,
    y: <span class="hljs-keyword">int</span>,
    z: <span class="hljs-keyword">int</span>,
}

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span>(</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> point = Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span>, z: <span class="hljs-number">0</span> };

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">true</span> {
        <span class="hljs-keyword">let</span> borrowed_point = &amp;point;
        <span class="hljs-keyword">let</span> another_borrow = &amp;point;

        <span class="hljs-comment">// data can be accessed via the references and the original owner</span>
        println!(<span class="hljs-string">"Point has coordinates: ({}, {}, {})"</span>,
                 borrowed_point.x,
                 another_borrow.y,
                 point.z);

        <span class="hljs-comment">// Error: cannot borrow `point` as mutable because it is also</span>
        <span class="hljs-comment">// borrowed as immutable</span>
        <span class="hljs-comment">//let mutable_borrow = &amp;mut point;</span>

        <span class="hljs-comment">// immutables references go out of scope</span>
    }

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">true</span> {
        <span class="hljs-keyword">let</span> mutable_borrow = &amp;<span class="hljs-keyword">mut</span> point;

        <span class="hljs-comment">// change data via mutable reference</span>
        mutable_borrow.x = <span class="hljs-number">5</span>;

        <span class="hljs-comment">// copies of the mutably borrowed struct are allowed</span>
        <span class="hljs-keyword">let</span> copied_point = point;

        <span class="hljs-comment">// Error: cannot borrow `point` as immutable because it is also</span>
        <span class="hljs-comment">// borrowed as mutable</span>
        <span class="hljs-comment">//let y = &amp;point.y;</span>

        <span class="hljs-comment">// Error: can't print, because println! takes an immutable</span>
        <span class="hljs-comment">// reference</span>
        <span class="hljs-comment">//println!("Point Z coordinate is {}", point.z);</span>

        <span class="hljs-comment">// mutable reference goes out of scope</span>
    }

    <span class="hljs-comment">// immutable references to point are allowed again</span>
    println!(<span class="hljs-string">"Point now has coordinates: ({}, {}, {})"</span>,
             point.x, point.y, point.z);
}
</code></pre>
<pre><code>$ rustc re-borrow.rs &amp;&amp; ./re-borrow
Point has coordinates: (0, 0, 0)
Point now has coordinates: (5, 0, 0)
</code></pre><p>When doing pattern matching or destructuring via the <code>let</code> binding, the <code>ref</code>
keyword can be used to take references to the fields of a struct.</p>
<pre><code class="lang-rust"><span class="hljs-comment">// ref.rs</span>
<span class="hljs-keyword">struct</span> Point {
    x: <span class="hljs-keyword">int</span>,
    y: <span class="hljs-keyword">int</span>,
}

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span>(</span>) {
    <span class="hljs-keyword">let</span> point = Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> };

    <span class="hljs-comment">// superfluous type annotation</span>
    <span class="hljs-keyword">let</span> copy_of_x: <span class="hljs-keyword">int</span> = {
        <span class="hljs-comment">// ref_to_x is a reference to the x field of point</span>
        <span class="hljs-comment">// ref_to_x type signature is &amp;int</span>
        <span class="hljs-keyword">let</span> Point { x: <span class="hljs-keyword">ref</span> ref_to_x, y: <span class="hljs-number">_</span> } = point;

        <span class="hljs-comment">// return a copy of the x field of point</span>
        *ref_to_x
    };

    <span class="hljs-comment">// a mutable copy of point</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> mutable_point = point;

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">true</span> {
        <span class="hljs-comment">// ref can be paired with mut to take mutable references</span>
        <span class="hljs-keyword">let</span> Point { x: <span class="hljs-number">_</span>, y: <span class="hljs-keyword">ref</span> <span class="hljs-keyword">mut</span> mut_ref_to_y } = mutable_point;

        <span class="hljs-comment">// mutate y field of mutable_point, via a mutable reference</span>
        *mut_ref_to_y = <span class="hljs-number">1</span>;
    }

    println!(<span class="hljs-string">"point is ({}, {})"</span>, point.x, point.y);
    println!(<span class="hljs-string">"mutable_point is ({}, {})"</span>,
             mutable_point.x, mutable_point.y);
}
</code></pre>
<pre><code>$ rustc ref.rs &amp;&amp; ./ref
point is (0, 0)
mutable_point is (0, 1)
</code></pre>
                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../../examples/move/README.html" class="navigation navigation-prev "><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../examples/lifetime/README.html" class="navigation navigation-next "><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../../gitbook/app.js"></script>
        

    
    <script src="../../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
